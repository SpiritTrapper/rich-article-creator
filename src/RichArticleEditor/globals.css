@import "tailwindcss";

@theme {
  --Monochrome-Main-color: #292d32;
  --Monochrome-White: #fff;
  --Monochrome-White-0: rgba(255, 255, 255, 0);
  --Monochrome-Auxiliary: #8f8f8f;
  --Monochrome-Auxiliary-50: rgba(143, 143, 143, 0.5);
  --Monochrome-Fields: #f8f8f8;
  --Monochrome-Active-menu: #ebebeb;
  --monochrome-outline-lines: #e6e6e6;
  --Monochrome-Background: #f5f5f5;
  --Monochrome-Spoiler: #f1f1f1;
  --Monochrome-Menu-text: #bcbcbc;
  --Monochrome-Middle-grey: #d9d9d9;
  --Monochrome-Invert-White: #ffffff;
  --Monochrome-Invert-Main-color: #292d32;
  --Monochrome-Grey-for-dots: #f8f8f8;
  --monochrome-fields-50: rgba(248, 248, 248, 0.5);
  --monochrome-auxiliary-50: rgba(143, 143, 143, 0.5);
  --Monochrome-Black-shadow: rgba(0, 0, 0, 0.2);

  --colors-gray: #8f8f8f;
  --Colors-Primary: #ff6b2d;
  --Colors-Brown: #bf8888;
  --colors-brown-10: rgba(191, 136, 136, 0.1);
  --colors-brown-1: #9f6b53;
  --colors-brown-2: #d9730f;
  --colors-brown-3: #cb912f;
  --colors-brown-4: #e18d3e;
  --Colors-Green: #81b796;
  --colors-green-15: rgba(129, 183, 150, 0.15);
  --colors-green-1: #458262;
  --colors-green-2: #258954;
  --Colors-Blue: #6ca0ff;
  --colors-blue-1: #5995b8;
  --colors-blue-2: #0085d2;
  --colors-blue-15: rgba(108, 160, 255, 0.15);
  --Colors-Red: #ff6062;
  --colors-red-1: #ff524b;
  --colors-red-10: rgba(255, 96, 98, 0.1);
  --colors-magenta-1: #9065b0;
  --colors-magenta-2: #a552e3;
  --colors-pink-1: #c2518c;
  --colors-pink-2: #ff89c7;
  --colors-orange-1: #d6534e;
  --colors-yellow-1: #f0c23b;
  --Colors-Okhra: #c7a23d;
  --colors-okhra-10: rgba(255, 211, 88, 0.1);

  --Colors-Notifications: #5c7081;
  --Colors-User: #f2f9ff;
  --Colors-Companion: #fff8e8;
  --Colors-Light-Brown: #a69272;
  --Colors-Light-Brown-2: rgba(217, 217, 217, 0.1);

  --default-avatar-bg: #e6e6e6;
  --default-avatar-main: #bdbdbd;
  --default-avatar-secondary: #d9d9d9;
  --default-avatar-highlight: white;

  --dialog-overlay: rgba(0, 0, 0, 0.7);

  /* Font families */
  --font-family-sans: "Open Sans", system-ui, -apple-system, sans-serif;
  --font-family-mono: "JetBrains Mono", "SF Mono", monospace;

  /* Font sizes */
  --font-size-xs: 0.75rem;
  --font-size-sm: 0.875rem;
  --font-size-base: 1rem;
  --font-size-lg: 1.125rem;
  --font-size-xl: 1.25rem;
  --font-size-2xl: 1.5rem;

  /* Spacing */
  --spacing-1: 0.25rem;
  --spacing-2: 0.5rem;
  --spacing-3: 0.75rem;
  --spacing-4: 1rem;
  --spacing-6: 1.5rem;
  --spacing-8: 2rem;

  /* Border radius */
  --radius-sm: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;
  --radius-2xl: 1.25rem;

  /* ===== Toolbar CSS variables ===== */
  --vv-top: 0;
  --kb-inset: 0;
  --toolbar-h: 52px;
  --toolbar-extra: 83px;
}

@layer base {
  * {
    box-sizing: border-box;
  }

  body {
    color: var(--Monochrome-Main-color);
    background: var(--Monochrome-Background);
    font-family: var(--font-family-sans);
  }

  #root {
    min-height: 100vh;
  }
}

@layer components {
  /* ===== ProseMirror click-tail ===== */
  .pm-click-tail {
    display: block;
    width: 100%;
    height: 96px;
    pointer-events: auto;
    cursor: text;
  }

  /* ===== Color-picking selection override ===== */
  .ProseMirror.isColorPicking::selection,
  .ProseMirror.isColorPicking *::selection {
    background: transparent !important;
  }

  /* ===== Editor content styles ===== */
  .pm-editor {
    padding: 0 0 20px 56px;
    font-family: var(--font-family-sans);
    font-size: 18px;
    font-style: normal;
    font-weight: 400;
    line-height: 27px;
  }

  .pm-editor > * {
    outline: none;
    padding-right: 56px;
  }

  .pm-editor::selection {
    background: #b4d7ff;
  }

  @media (max-width: 1200px) {
    .pm-editor {
      padding: 0 0 20px 20px;
    }
    .pm-editor > * {
      padding-right: 20px;
    }
  }

  .pm-editor h2 {
    font-size: 24px;
    font-weight: 700;
    line-height: 33px;
    margin: 40px 0 24px 0;
  }

  .pm-editor h3 {
    font-size: 20px;
    font-weight: 700;
    line-height: 27px;
    margin: 20px 0 12px 0;
  }

  .pm-editor img {
    max-width: 100%;
  }

  .pm-editor p {
    position: relative;
    z-index: 1;
    font-size: 18px;
    font-weight: 400;
    line-height: 150.036%;
    margin: 20px 0;
    --moz-user-select: initial;
  }

  .pm-editor ol,
  .pm-editor ul {
    margin-left: 25px;
  }

  .pm-editor ol p,
  .pm-editor ul p {
    margin: 0 0 0.5rem;
  }

  .pm-editor ol {
    list-style: none;
    counter-reset: lvl1;
    margin: 20px 0;
    padding-left: 12px;
  }

  .pm-editor ol > li {
    counter-increment: lvl1;
    position: relative;
    padding-left: 1.2em;
  }

  .pm-editor ol > li::before {
    content: counter(lvl1, decimal) ".";
    position: absolute;
    left: 0;
  }

  .pm-editor ol > li > ol {
    counter-reset: lvl2;
    list-style: none;
    margin: 0;
    padding-left: 0;
  }

  .pm-editor ol > li > ol > li {
    counter-increment: lvl2;
    position: relative;
    padding-left: 1.2em;
  }

  .pm-editor ol > li > ol > li::before {
    content: counter(lvl2) ".";
    position: absolute;
    left: 0;
  }

  .pm-editor ol > li > ol > li > ol {
    counter-reset: lvl3;
    list-style: none;
    margin: 0;
    padding-left: 0;
  }

  .pm-editor ol > li > ol > li > ol > li {
    counter-increment: lvl3;
    position: relative;
    padding-left: 1.2em;
  }

  .pm-editor ol > li > ol > li > ol > li::before {
    content: counter(lvl3, lower-roman) ".";
    position: absolute;
    left: 0;
  }

  .pm-editor a {
    color: var(--Colors-Blue);
    text-decoration: underline;
  }

  .pm-editor pre {
    background: var(--Monochrome-Fields);
    border-radius: 0.5rem;
    color: var(--Monochrome-Main-color);
    margin: 1.5rem 0;
    padding: 0.75rem 1rem;
  }

  .pm-editor pre code {
    background: none;
    color: inherit;
    font-size: 0.8rem;
    padding: 0;
  }

  .pm-editor blockquote {
    border-left: 3px solid var(--Monochrome-Main-color);
    margin: 20px 0;
    padding-left: 20px;
  }

  /* ===== Details/Summary styles ===== */
  .hiddenTextDetails {
    position: relative;
    display: flex;
    gap: 0.25rem;
    margin: 1.5rem 0;
    border: 1px solid var(--monochrome-outline-lines);
    border-radius: 20px;
    padding: 0;
  }

  .hiddenTextDetails .node-audioWaveform,
  .hiddenTextDetails .node-customImage,
  .hiddenTextDetails .node-video,
  .hiddenTextDetails .node-imageCarousel {
    padding: 0 12px;
  }

  .hiddenTextDetails summary {
    font-weight: 700;
    line-height: 2;
    height: 64px;
    text-align: center;
    background: var(--Monochrome-Fields);
    border-radius: 20px;
    padding: 12px;
  }

  .node-detailsSummary.is-empty > summary[data-placeholder]::before {
    content: attr(data-placeholder);
    color: var(--Monochrome-Auxiliary);
    pointer-events: none;
    position: absolute;
    left: calc(50% - 80px);
  }

  .hiddenTextDetails > button {
    position: absolute;
    left: 12px;
    top: 12px;
    align-items: center;
    background: var(--Monochrome-White);
    border-radius: 12px;
    display: flex;
    justify-content: center;
    padding: 0;
    width: 40px;
    height: 40px;
  }

  .hiddenTextDetails > button:hover {
    background-color: var(--Monochrome-Auxiliary);
  }

  .hiddenTextDetails > button::before {
    content: "";
    display: block;
    margin: auto;
    width: 15px;
    height: 8px;
    background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='15' height='8' viewBox='0 0 15 8' fill='none'%3E%3Cpath d='M1 1l6.5 6L14 1' stroke='currentColor' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E")
      no-repeat center center;
  }

  .hiddenTextDetails.is-open > button::before {
    transform: rotate(180deg);
  }

  .hiddenTextDetails > div {
    display: flex;
    flex-direction: column;
    gap: 12px;
    width: 100%;
  }

  .hiddenTextDetails > div > [data-type="detailsContent"] > p {
    padding: 0 12px 12px;
    margin: 0;
  }

  .hiddenTextDetails .hiddenTextDetails {
    margin: 0 0 0 20px;
  }

  /* ===== Editor placeholder ===== */
  .pm-editor-empty {
    font-size: 18px;
    font-weight: 400;
    color: var(--Monochrome-Auxiliary);
    content: attr(data-placeholder);
    float: left;
    pointer-events: none;
  }

  /* ===== Network indicator tooltip ===== */
  .indicator-btn {
    position: relative;
    display: flex;
    width: 40px;
    height: 40px;
    padding: 0;
    border-radius: 12px;
    background: var(--Monochrome-White);
    cursor: default;
    overflow: hidden;
  }

  .indicator-btn > svg {
    margin: auto;
  }

  .indicator-btn > svg path {
    fill: var(--Colors-Green);
  }

  .indicator-btn.is-disconnect > svg path {
    fill: var(--Colors-Red);
  }

  .indicator-btn:hover {
    overflow: visible;
  }

  .indicator-btn:hover .indicator-bubble {
    opacity: 1;
    overflow: visible;
  }

  .indicator-bubble {
    position: absolute;
    top: calc(100% + 12px);
    left: -90px;
    background: var(--Monochrome-Background);
    border-radius: 16px;
    width: 224px;
    padding: 16px;
    margin: 0;
    text-align: center;
    color: var(--Colors-Green);
    font-size: 12px;
    font-weight: 500;
    line-height: 18px;
    box-shadow: -4px 10px 30px 0 var(--Monochrome-Black-shadow, rgba(0, 0, 0, 0.2));
    opacity: 0;
    transition: opacity 0.2s linear;
  }

  .indicator-bubble::before {
    content: "";
    position: absolute;
    bottom: 100%;
    left: calc(50% - 8px);
    width: 0;
    height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-bottom: 8px solid var(--Monochrome-Background);
  }

  .indicator-bubble.is-disconnect {
    color: var(--Colors-Red);
  }

  @media (max-width: 1200px) {
    .indicator-btn {
      width: 44px;
      height: 44px;
    }
    .indicator-bubble {
      left: -85px;
    }
  }

  /* ===== NodeCaption placeholder ===== */
  .node-caption:empty::before {
    content: attr(aria-placeholder);
    color: var(--Monochrome-Auxiliary);
    pointer-events: none;
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  /* ===== ToolbarBucketMenu SVG color variants ===== */
  .bucket-btn {
    width: 46px;
    height: 46px;
    padding: 0;
    border-radius: 11px;
    transition: none;
    border: 3px solid transparent;
  }

  .bucket-btn svg {
    width: 100%;
    height: 100%;
  }

  .bucket-btn.is-active svg rect {
    stroke: transparent;
  }

  .bucket-btn._c0 svg rect {
    stroke: var(--Monochrome-Main-color);
  }
  .bucket-btn._c0 svg path {
    fill: var(--Monochrome-Main-color);
  }
  .bucket-btn._c0.is-active {
    border-color: var(--Monochrome-Main-color);
  }

  .bucket-btn._c1 svg rect {
    stroke: var(--colors-gray);
  }
  .bucket-btn._c1 svg path {
    fill: var(--colors-gray);
  }
  .bucket-btn._c1.is-active {
    border-color: var(--colors-gray);
  }

  .bucket-btn._c2 svg rect {
    stroke: var(--colors-brown-4);
  }
  .bucket-btn._c2 svg path {
    fill: var(--colors-brown-4);
  }
  .bucket-btn._c2.is-active {
    border-color: var(--colors-brown-4);
  }

  .bucket-btn._c3 svg rect {
    stroke: var(--colors-brown-1);
  }
  .bucket-btn._c3 svg path {
    fill: var(--colors-brown-1);
  }
  .bucket-btn._c3.is-active {
    border-color: var(--colors-brown-1);
  }

  .bucket-btn._c4 svg rect {
    stroke: var(--colors-blue-2);
  }
  .bucket-btn._c4 svg path {
    fill: var(--colors-blue-2);
  }
  .bucket-btn._c4.is-active {
    border-color: var(--colors-blue-2);
  }

  .bucket-btn._c5 svg rect {
    stroke: var(--colors-pink-2);
  }
  .bucket-btn._c5 svg path {
    fill: var(--colors-pink-2);
  }
  .bucket-btn._c5.is-active {
    border-color: var(--colors-pink-2);
  }

  .bucket-btn._c6 svg rect {
    stroke: var(--colors-yellow-1);
  }
  .bucket-btn._c6 svg path {
    fill: var(--colors-yellow-1);
  }
  .bucket-btn._c6.is-active {
    border-color: var(--colors-yellow-1);
  }

  .bucket-btn._c7 svg rect {
    stroke: var(--colors-red-1);
  }
  .bucket-btn._c7 svg path {
    fill: var(--colors-red-1);
  }
  .bucket-btn._c7.is-active {
    border-color: var(--colors-red-1);
  }

  .bucket-btn._c8 svg rect {
    stroke: var(--colors-green-2);
  }
  .bucket-btn._c8 svg path {
    fill: var(--colors-green-2);
  }
  .bucket-btn._c8.is-active {
    border-color: var(--colors-green-2);
  }

  .bucket-btn._c9 svg rect {
    stroke: var(--colors-magenta-2);
  }
  .bucket-btn._c9 svg path {
    fill: var(--colors-magenta-2);
  }
  .bucket-btn._c9.is-active {
    border-color: var(--colors-magenta-2);
  }

  .bucket-btn._b0.is-active {
    border-color: var(--Monochrome-Main-color);
  }

  .bucket-btn._b1 svg rect:first-child {
    fill: rgba(143, 143, 143, 0.2);
  }
  .bucket-btn._b1 svg rect:last-child {
    stroke: var(--colors-gray);
  }
  .bucket-btn._b1.is-active {
    border-color: var(--colors-gray);
  }

  .bucket-btn._b2 svg rect:first-child {
    fill: rgba(225, 141, 62, 0.2);
  }
  .bucket-btn._b2 svg rect:last-child {
    stroke: var(--colors-brown-4);
  }
  .bucket-btn._b2.is-active {
    border-color: var(--colors-brown-4);
  }

  .bucket-btn._b3 svg rect:first-child {
    fill: rgba(159, 107, 83, 0.2);
  }
  .bucket-btn._b3 svg rect:last-child {
    stroke: var(--colors-brown-1);
  }
  .bucket-btn._b3.is-active {
    border-color: var(--colors-brown-1);
  }

  .bucket-btn._b4 svg rect:first-child {
    fill: rgba(0, 133, 210, 0.2);
  }
  .bucket-btn._b4 svg rect:last-child {
    stroke: var(--colors-blue-2);
  }
  .bucket-btn._b4.is-active {
    border-color: var(--colors-blue-2);
  }

  .bucket-btn._b5 svg rect:first-child {
    fill: rgba(255, 137, 199, 0.2);
  }
  .bucket-btn._b5 svg rect:last-child {
    stroke: var(--colors-pink-2);
  }
  .bucket-btn._b5.is-active {
    border-color: var(--colors-pink-2);
  }

  .bucket-btn._b6 svg rect:first-child {
    fill: rgba(240, 194, 59, 0.2);
  }
  .bucket-btn._b6 svg rect:last-child {
    stroke: var(--colors-yellow-1);
  }
  .bucket-btn._b6.is-active {
    border-color: var(--colors-yellow-1);
  }

  .bucket-btn._b7 svg rect:first-child {
    fill: rgba(255, 82, 75, 0.2);
  }
  .bucket-btn._b7 svg rect:last-child {
    stroke: var(--colors-red-1);
  }
  .bucket-btn._b7.is-active {
    border-color: var(--colors-red-1);
  }

  .bucket-btn._b8 svg rect:first-child {
    fill: rgba(37, 137, 84, 0.2);
  }
  .bucket-btn._b8 svg rect:last-child {
    stroke: var(--colors-green-2);
  }
  .bucket-btn._b8.is-active {
    border-color: var(--colors-green-2);
  }

  .bucket-btn._b9 svg rect:first-child {
    fill: rgba(165, 82, 227, 0.2);
  }
  .bucket-btn._b9 svg rect:last-child {
    stroke: var(--colors-magenta-2);
  }
  .bucket-btn._b9.is-active {
    border-color: var(--colors-magenta-2);
  }

  /* ===== Carousel embla slider ===== */
  .embla {
    position: relative;
    width: 100%;
    max-width: 100%;
    margin: auto;
    user-select: none;
  }

  .embla._horizontal {
    --slide-height: 320px;
    --slide-spacing: 16px;
    --slide-min-width: 533px;
    --slide-size: 85%;
  }

  .embla._vertical {
    --slide-height: 520px;
    --slide-spacing: 16px;
    --slide-min-width: 270px;
    --slide-size: 50%;
  }

  .embla._square {
    --slide-height: 360px;
    --slide-spacing: 12px;
    --slide-min-width: 360px;
    --slide-size: 60%;
  }

  @media (max-width: 1200px) {
    .embla._horizontal {
      --slide-height: 320px;
      --slide-spacing: 16px;
      --slide-size: 85%;
    }
    .embla._vertical {
      --slide-height: 620px;
      --slide-spacing: 16px;
      --slide-size: 50%;
    }
    .embla._square {
      --slide-height: 450px;
      --slide-spacing: 12px;
      --slide-size: 50%;
    }
  }

  @media (max-width: 1024px) {
    .embla {
      --slide-height: 600px;
      --slide-spacing: 8px;
      --slide-size: 80%;
    }
  }

  @media (max-width: 768px) {
    .embla._vertical {
      --slide-height: 488px;
      --slide-spacing: 8px;
      --slide-min-width: 162px;
      --slide-size: 45%;
    }
    .embla._square {
      --slide-height: 288px;
      --slide-spacing: 8px;
      --slide-min-width: 288px;
      --slide-size: 50%;
    }
  }

  @media (max-width: 600px) {
    .embla._horizontal {
      --slide-height: 188px;
      --slide-spacing: 8px;
      --slide-min-width: 313px;
      --slide-size: 85%;
    }
    .embla._vertical {
      --slide-height: 388px;
      --slide-size: 55%;
    }
  }

  .embla__viewport {
    overflow: hidden;
  }

  .embla__container {
    display: flex;
    touch-action: pan-y pinch-zoom;
    margin-left: calc(var(--slide-spacing) * -1);
  }

  .embla__slide {
    transform: translate3d(0, 0, 0);
    flex: 0 0 var(--slide-size);
    min-width: var(--slide-min-width);
    padding-left: var(--slide-spacing);
  }

  .embla__slide__inner {
    border-radius: 16px;
    position: relative;
    overflow: hidden;
    height: var(--slide-height);
    user-select: none;
    backface-visibility: hidden;
    transition: opacity 0.2s linear;
  }

  /* ===== Carousel controls (CarouselExtension) ===== */
  .carousel-controls > button {
    height: 44px;
    border-radius: 12px;
    padding: 0 16px;
    font-size: 14px;
  }

  .carousel-controls > button:first-child {
    color: var(--Colors-Red);
  }

  /* ===== Toolbar btn styles (used globally) ===== */
  .toolbar-btn {
    display: flex;
    width: 40px;
    height: 40px;
    padding: 0;
    border-radius: 8px;
    transition: background 0.2s linear;
  }

  .toolbar-btn:hover {
    background: var(--Monochrome-Background);
  }

  .toolbar-btn > svg {
    margin: auto;
  }

  .toolbar-btn[disabled] {
    opacity: 0.4;
    background: transparent;
  }

  .toolbar-btn.is-dark > svg {
    filter: invert(1);
  }

  .toolbar-btn.is-active-link > svg path {
    stroke: var(--Colors-Blue);
  }

  /* ===== Dropdown button ===== */
  .dropdown-btn {
    display: flex;
    width: 40px;
    height: 40px;
    padding: 0;
  }

  .dropdown-btn > * {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 3px;
    margin: auto;
  }

  .dropdown-btn.is-dark svg {
    filter: invert(1);
  }

  /* ===== Dropdown chevron ===== */
  .dropdown-chevron {
    transition: transform 0.2s linear;
  }

  .dropdown-chevron.is-open {
    transform: rotate(-180deg);
  }

  .dropdown-chevron.is-dark {
    filter: invert(1);
  }

  /* ===== DropdownBox shadow ===== */
  .dropdown-menu {
    box-shadow:
      0 -8px 20px 0 rgba(0, 0, 0, 0.05),
      69px 171px 52px 0 rgba(0, 0, 0, 0),
      44px 109px 47px 0 rgba(0, 0, 0, 0.01),
      25px 62px 40px 0 rgba(0, 0, 0, 0.03),
      11px 27px 29px 0 rgba(0, 0, 0, 0.04),
      3px 7px 16px 0 rgba(0, 0, 0, 0.05);
  }

  /* ===== DropdownBox item dark mode ===== */
  .dropdown-item.is-dark > svg {
    filter: invert(1);
  }
}
